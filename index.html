<!DOCTYPE html>
<html>
<head>
    <title>Калькулятор дози опромінення (ядерний вибух)</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <style>
        body {
            font-family: Arial, sans-serif;
            max-width: 600px;
            margin: 10px auto;
            padding: 15px;
            border: 1px solid #ccc;
            border-radius: 8px;
            font-size: 16px;
        }
        h2 {
            text-align: center;
            font-size: 24px;
        }
        label {
            display: block;
            margin-top: 15px;
            font-weight: bold;
            font-size: 18px;
        }
        input[type="number"], select {
            width: 100%;
            padding: 10px;
            margin-top: 5px;
            box-sizing: border-box;
            font-size: 18px;
            background-color: #f0f0f0;
            border: 1px solid #ccc;
            border-radius: 4px;
        }
        button {
            margin-top: 25px;
            padding: 12px 18px;
            background-color: #4CAF50;
            color: white;
            border: none;
            border-radius: 4px;
            cursor: pointer;
            width: 100%;
            font-size: 20px;
        }
        button:hover {
            background-color: #45a049;
        }
        #results {
            margin-top: 25px;
            padding: 15px;
            border: 1px solid #ddd;
            background-color: #e9e9e9;
            border-radius: 4px;
            font-size: 18px;
        }
    </style>
</head>
<body>

    <h2>Калькулятор дози опромінення (ЯВ)</h2>

    <label for="Pt">Потужність дози випромінювання за даними розвідки на час t після ЯВ (Pt, мЗв/год):</label>
    <input type="number" id="Pt" value="0">

    <label for="t_izmereniya">Час вимірювання потужності дози (t, години після ЯВ):</label>
    <input type="number" id="t_izmereniya" value="0">

    <label for="t_nachalo">Початок опромінення (t_поч, години після ЯВ):</label>
    <input type="number" id="t_nachalo" value="0">

    <label for="t_konec">Кінець опромінення (t_кін, години після ЯВ):</label>
    <input type="number" id="t_konec" value="0">
    
    <label for="Kz">Коефіцієнт захисту (Kз):</label>
    <select id="Kz">
        <option value="1" selected>1</option>
        <option value="2">2</option>
        <option value="4">4</option>
        <option value="10">10</option>
        <option value="20">20</option>
        <option value="50">50</option>
        <option value="100">100</option>
        <option value="200">200</option>
        <option value="400">400</option>
        <option value="500">500</option>
    </select>

    <button onclick="performCalculation()">Розрахувати дозу</button>

    <div id="results">
        <p><strong>P1 (Потужність дози через 1 годину після ЯВ ):</strong> <span id="P1_result">-</span> мЗв/год</p>
        <p><strong>D (Доза опромінення, отримана на відкритій місцевості):</strong> <span id="D_external_result">-</span> мЗв</p>
        <p><strong>D (Доза опромінення, отримана з урахуванням Kз):</strong> <span id="Dose_result">-</span> мЗв</p>
        <p style="font-size: 14px; color: #555;">(Коефіцієнт спаду $n=1.2$ для ЯВ)</p>
    </div>

    <script>
        // Коефіцієнт спаду для ЯДЕРНОГО ВИБУХУ
        const N_COEFFICIENT = 1.2; 

        // Функція для розрахунку дози (D) на відкритій місцевості
        function calculateDoseExternal(P1, t_nach, t_kon) {
            const n = N_COEFFICIENT;
            const exponent = 1 - n; // 1 - 1.2 = -0.2

            // Формула інтегрування
            const first_term = (P1 * Math.pow(t_nach, exponent)) / exponent;
            const second_term = (t_nach / t_kon);
            
            // Захист від некоректних даних
            if (t_nach >= t_kon || P1 <= 0 || t_nach <= 0) return 0;

            const D = first_term * (1 - Math.pow(second_term, exponent));
            return D;
        }

        function performCalculation() {
            // Зчитування даних
            const Pt = parseFloat(document.getElementById('Pt').value);
            const t_izmereniya = parseFloat(document.getElementById('t_izmereniya').value);
            const t_nachalo = parseFloat(document.getElementById('t_nachalo').value);
            const t_konec = parseFloat(document.getElementById('t_konec').value);
            const Kz = parseFloat(document.getElementById('Kz').value);


            // Перевірка введених даних
            if (isNaN(Pt) || isNaN(t_izmereniya) || isNaN(t_nachalo) || isNaN(t_konec) || t_izmereniya <= 0 || t_nachalo <= 0 || t_konec <= 0 || t_nachalo >= t_konec || isNaN(Kz) || Kz < 1) {
                document.getElementById('P1_result').textContent = 'Помилка введення!';
                document.getElementById('D_external_result').textContent = '—';
                document.getElementById('Dose_result').textContent = 'Перевірте дані.';
                return;
            }

            // 1. Розрахунок P1. Формула: P1 = Pt * t^n
            const n = N_COEFFICIENT;
            const P1 = Pt * Math.pow(t_izmereniya, n);

            // 2. Розрахунок Дози D на відкритій місцевості
            const D_external_mSv = calculateDoseExternal(P1, t_nachalo, t_konec);
            
            // 3. Розрахунок фактичної дози з урахуванням захисту (D_фактична = D_зовнішня / Kз)
            const D_actual_mSv = D_external_mSv / Kz;


            // Виведення результатів
            document.getElementById('P1_result').textContent = P1.toFixed(2);
            document.getElementById('D_external_result').textContent = D_external_mSv.toFixed(2);
            document.getElementById('Dose_result').textContent = D_actual_mSv.toFixed(2);
        }
    </script>

</body>
</html>
